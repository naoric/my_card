<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registration</title>
  <link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css" />

  <link rel="stylesheet" type="text/css" href="css/jqm-datebox.min.css" />

</head>

<body>
  <div data-role="page" id="one">
    <div data-role="header" data-theme="b">
      <h1>Register</h1>
    </div>
    <div data-role="content">
      <form action="http://redigo.me/user" method="post" id="myform">
        <input type="text" name="email" id="email" value="" placeholder="Enter email" />
        <input type="text" name="full_name" id="name" value="" placeholder="Enter full name" />
        <input name="password" id="password" value="" placeholder="Enter password" type="password" />
        <input name="veriPass" id="veriPass" value="" placeholder="Verify password" type="password" />
        <input name="birth_date" id="birth_date" type="text" data-role="datebox" data-options='{"mode":"datebox", "useNewStyle":true, "fieldsOrederOverride":"d m y"}' />
        <button id="submit" type="submit" name="submit" value="submit" data-theme="b">Submit</button>
      </form>
    </div>
    <!-- /content -->
    <div data-role="footer" data-theme="d">
      <div data-role="footer">
        <h4>ready to Save?</h4>
      </div>
      <!-- /footer -->
    </div>

  </div>
  <script src="js/jquery-1.10.2.min.js"></script>
  <script src="js/jquery.mobile-1.3.0.min.js"></script>
  <script type="text/javascript" src="js/jquery.validate.min.js"></script>
  <script type="text/javascript" src="js/jqm-datebox.core.min.js"></script>
  <script type="text/javascript" src="js/jqm-datebox.mode.calbox.min.js"></script>
  <script type="text/javascript" src="js/jqm-datebox.mode.datebox.min.js"></script>
  <script type="text/javascript">
  jQuery.extend(jQuery.mobile.datebox.prototype.options, {
    'overrideDateFormat': '%d.%m.%Y'
  });

  $("#select-choice").change(function() {
    var $this = $(this);
    $this.find("option:first-child").remove();
    $this.off();
  });

  function validate(frm) {
    return $(frm).validate({
      rules: {
        password: {
          required: true,
          minlength: 5
        },
        birth_date: {
          required: true

        },
        full_name: {
          required: true,
          minlength: 4

        },
        veriPass: {
          required: true,
          minlength: 5,
          equalTo: "#password"
        },
        email: {
          required: true,
          email: true
        },
        full_Name: {
          required: true,
          minlength: 2

        }
      },
      messages: {
        password: {
          required: "Please provide a password",
          minlength: "Your password must be at least 5 characters long"
        },
        full_name: {
          required: "Please provide a full name",
          minlength: "please enter a valid full name "
        },
        birth_date: {
          required: "Please provide a birth date",
          minlength: "please provide a valid birthdate"
        },
        veriPass: {
          required: "Please provide a password",
          equalTo: "Please enter the same password as above"
        },
        email: {
          required: "Please provide an email address",
          email: "Please enter a valid email address"
        },
        full_Name: {
          name: "please enter full name"
        }
      }
    });
  }

  $(document).on('submit', '#myform', function(e) {
    e.preventDefault();

    if (validate('#myform').form()) {
      $.ajax({
        url: "http://redigo.me/user",
        type: "post",
        dataType: "json",
        data: $("#myform").serialize(),
        success: function(r) {
          if (r.status == "success") {
            $.mobile.changePage("#business");
          } else {
            alert('bad');
          }
        },
        fail: function(e) {
          console.dir(e);
        },
        beforeSend: function() {
          // This callback function will trigger before data is sent
          $.mobile.showPageLoadingMsg(true); // This will show ajax spinner
        }
      });
    }

    return false;

  });
  </script>

</body>

</html>
